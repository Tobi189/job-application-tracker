/* =========================
   New clean UI (responsive)
   - looks nicer
   - mobile/minimized works
   - table becomes "cards" on small screens
========================= */

:root{
  --bg: #f4f6fb;
  --card: #ffffff;
  --text: #111827;
  --muted: #6b7280;

  --border: rgba(17,24,39,0.10);
  --border2: rgba(17,24,39,0.16);

  --shadow: 0 10px 30px rgba(17,24,39,0.08);

  --primary: #2563eb;
  --primary2: #1d4ed8;

  --danger: #dc2626;
  --dangerBg: #fff1f2;

  --radius: 16px;
}

* { box-sizing: border-box; }

body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  margin: 0;
  padding: 24px;
  color: var(--text);
  background:
    radial-gradient(900px 380px at 10% -10%, rgba(37,99,235,0.10), transparent 55%),
    radial-gradient(900px 380px at 90% -10%, rgba(220,38,38,0.06), transparent 55%),
    var(--bg);
}

/* center page */
.topbar, .filters, .table-wrap, #modalOverlay{
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
}

/* =========================
   Topbar
========================= */
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  margin-bottom: 12px;
}

.topbar h1{
  margin: 0;
  font-size: clamp(32px, 5vw, 52px);
  letter-spacing: -0.02em;
  font-weight: 900;
}

/* =========================
   Buttons
========================= */
.btn{
  border: 1px solid var(--border2);
  background: #fff;
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease;
  box-shadow: 0 6px 18px rgba(17,24,39,0.06);
}

.btn:hover{
  transform: translateY(-1px);
  box-shadow: 0 12px 26px rgba(17,24,39,0.10);
}

.btn:active{ transform: translateY(0); }

.btn-small{
  padding: 8px 12px;
  border-radius: 11px;
  font-size: 14px;
}

.btn-primary{
  background: linear-gradient(180deg, var(--primary), var(--primary2));
  color: #fff;
  border-color: rgba(29,78,216,0.65);
}

.btn-danger{
  border-color: rgba(220,38,38,0.40);
  color: var(--danger);
  background: #fff;
}

.btn-danger:hover{
  background: var(--dangerBg);
}

/* =========================
   Filters
========================= */
.filters{
  display:flex;
  gap: 14px;
  align-items:end;
  flex-wrap: wrap;
  margin: 12px auto 14px;
}

.filter-item{
  display:grid;
  gap: 6px;
  font-weight: 800;
}

.filters input,
.filters select{
  width: min(380px, 75vw);
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border2);
  background: rgba(255,255,255,0.92);
  box-shadow: 0 6px 18px rgba(17,24,39,0.06);
}

.filters input:focus,
.filters select:focus{
  outline: none;
  border-color: rgba(37,99,235,0.55);
  box-shadow: 0 0 0 4px rgba(37,99,235,0.16);
  background: #fff;
}

/* =========================
   Table container
========================= */
.table-wrap{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden; /* clean rounded corners */
}

/* Table */
.jobs-table{
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed; /* keeps notes ellipsis reliable */
}

.jobs-table th,
.jobs-table td{
  padding: 12px 14px;
  text-align: left;
  vertical-align: top;
  border-bottom: 1px solid var(--border);
}

.jobs-table thead th{
  background: linear-gradient(180deg, #fafbff, #f4f6fb);
  font-weight: 900;
  white-space: nowrap;
  border-bottom: 1px solid var(--border2);
}

.jobs-table tbody tr:hover td{
  background: rgba(37,99,235,0.03);
}

.jobs-table tbody tr:last-child td{
  border-bottom: none;
}

/* column sizing (desktop) */
.col-company  { width: 170px; }
.col-position { width: 200px; }
.col-status   { width: 130px; }
.col-date     { width: 150px; }
.col-actions  { width: 190px; }
/* notes gets the remaining width */

/* =========================
   Notes preview (ellipsis)
========================= */
.notes-cell { position: relative; }

.notes-preview{
  width: 100%;
  text-align: left;
  border: 1px dashed rgba(17,24,39,0.14);
  background: rgba(17,24,39,0.02);
  padding: 8px 10px;
  border-radius: 12px;
  cursor: pointer;
  font: inherit;
  color: inherit;

  display:block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.notes-preview:hover{
  background: rgba(37,99,235,0.06);
  border-color: rgba(37,99,235,0.30);
}

/* =========================
   Actions cell
========================= */
.actions-cell{
  display:flex;
  gap: 10px;
  align-items:center;
  white-space: nowrap;
}

.actions-cell form{ margin: 0; }

/* =========================
   Modal
========================= */
.hidden { display: none; }

.modal-overlay{
  position: fixed;
  inset: 0;
  background: rgba(17,24,39,0.55);
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 20px;
}

.modal-overlay.hidden { display: none; }

.modal{
  background: rgba(255,255,255,0.98);
  width: min(580px, 100%);
  border-radius: 18px;
  padding: 16px;
  box-shadow: 0 24px 70px rgba(17,24,39,0.28);
  border: 1px solid rgba(255,255,255,0.35);
  backdrop-filter: blur(8px);
}

.modal-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom: 1px solid var(--border);
  padding-bottom: 10px;
}

.modal-header h2{
  margin: 0;
  font-weight: 900;
  font-size: 18px;
}

.icon-btn{
  width: 38px;
  height: 38px;
  border-radius: 12px;
  border: 1px solid var(--border2);
  background: #fff;
  cursor: pointer;
  display:grid;
  place-items:center;
  box-shadow: 0 6px 18px rgba(17,24,39,0.06);
}

.modal-body{
  display:grid;
  gap: 12px;
  margin-top: 12px;
}

.modal-body label{
  display:grid;
  gap: 6px;
  font-weight: 800;
}

.modal-body input,
.modal-body select,
.modal-body textarea{
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border2);
  background: #fff;
  box-shadow: 0 6px 18px rgba(17,24,39,0.06);
}

.modal-body input:focus,
.modal-body select:focus,
.modal-body textarea:focus{
  outline: none;
  border-color: rgba(37,99,235,0.55);
  box-shadow: 0 0 0 4px rgba(37,99,235,0.16);
}

.modal-footer{
  display:flex;
  justify-content:flex-end;
  gap: 10px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid var(--border);
}

/* =========================
   Notes popover (your JS uses this)
========================= */
.notes-popover{
  position: fixed;
  z-index: 9999;
  max-width: min(520px, calc(100vw - 24px));
  max-height: min(260px, calc(100vh - 24px));
  overflow: auto;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(17,24,39,0.14);
  background: #fff;
  box-shadow: 0 22px 60px rgba(17,24,39,0.22);
}

.notes-popover-title{
  font-weight: 900;
  margin: 0 0 6px;
  font-size: 14px;
}

.notes-popover-text{
  margin: 0;
  white-space: pre-wrap;
  word-break: break-word;
  line-height: 1.45;
  color: rgba(17,24,39,0.92);
  font-size: 14px;
}

/* =========================
   âœ… THE IMPORTANT PART:
   On small screens, convert table rows into "cards"
   so NOTHING gets chopped (including Delete).
========================= */
@media (max-width: 860px){

  body{ padding: 18px; }

  /* Filters stack */
  .filters{
    flex-direction: column;
    align-items: stretch;
  }
  .filters input,
  .filters select{
    width: 100%;
  }

  /* Table becomes a list of cards */
  .table-wrap{ overflow: visible; }

  .jobs-table{
    table-layout: auto;
  }

  .jobs-table thead{
    display:none;
  }

  .jobs-table,
  .jobs-table tbody,
  .jobs-table tr,
  .jobs-table td{
    display:block;
    width: 100%;
  }

  .jobs-table tr{
    border-bottom: 1px solid var(--border);
    padding: 12px 12px;
  }

  .jobs-table tr:last-child{
    border-bottom: none;
  }

  .jobs-table td{
    border: none;
    padding: 10px 6px;
  }

  /* label + value layout */
  .jobs-table td{
    display:grid;
    grid-template-columns: 120px 1fr;
    gap: 10px;
    align-items: start;
  }

  /* generate labels based on column order */
  .jobs-table td:nth-child(1)::before { content: "Company"; color: var(--muted); font-weight: 800; }
  .jobs-table td:nth-child(2)::before { content: "Position"; color: var(--muted); font-weight: 800; }
  .jobs-table td:nth-child(3)::before { content: "Status"; color: var(--muted); font-weight: 800; }
  .jobs-table td:nth-child(4)::before { content: "Applied"; color: var(--muted); font-weight: 800; }
  .jobs-table td:nth-child(5)::before { content: "Notes"; color: var(--muted); font-weight: 800; }
  .jobs-table td:nth-child(6)::before { content: "Actions"; color: var(--muted); font-weight: 800; }

  /* Notes: allow wrapping inside the card (still looks fine) */
  .notes-preview{
    white-space: nowrap; /* keep ... */
  }

  /* Actions: stack buttons so Delete never gets cut */
  .actions-cell{
    display:flex;
    flex-wrap: wrap;
    gap: 10px;
  }
}

/* =========================
   Status colored borders
========================= */

/* Desktop: color the whole row, not the first cell */
.jobs-table tbody tr{
  box-shadow: inset 6px 0 0 transparent;  /* left bar inside row */
}

.jobs-table tbody tr.status-rejected  { box-shadow: inset 6px 0 0 #dc2626; }
.jobs-table tbody tr.status-applied   { box-shadow: inset 6px 0 0 #f59e0b; }
.jobs-table tbody tr.status-interview { box-shadow: inset 6px 0 0 #2563eb; }
.jobs-table tbody tr.status-offer     { box-shadow: inset 6px 0 0 #16a34a; }
/* Mobile/card mode: color the card border itself */
@media (max-width: 860px){
  .jobs-table tr{
    border-left: 6px solid transparent;
  }
  .jobs-table tr.status-rejected  { border-left-color: #dc2626; }
  .jobs-table tr.status-applied   { border-left-color: #f59e0b; }
  .jobs-table tr.status-interview { border-left-color: #2563eb; }
  .jobs-table tr.status-offer     { border-left-color: #16a34a; }
}