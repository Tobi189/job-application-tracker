<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Job Applications</title>
    <link rel="stylesheet" th:href="@{/style.css(v=${#dates.createNow().time})}">


<body>

<header class="topbar">
    <h1>Job Applications</h1>
    <button id="openModalBtn" type="button">Add Job</button>
</header>

<table class="jobs-table">
    <thead>
    <tr>
        <th>Company</th>
        <th>Position</th>
        <th>Status</th>
        <th>Applied Date</th>
        <th>Notes</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="j : ${jobs}">
        <td th:text="${j.company}"></td>
        <td th:text="${j.position}"></td>
        <td th:text="${j.status}"></td>
        <td th:text="${j.appliedDate}"></td>
        <td th:text="${j.notes}"></td>
    </tr>
    </tbody>
</table>

<!-- Modal overlay -->
<div id="modalOverlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-header">
            <h2 id="modalTitle">Add Job</h2>
            <button id="closeModalBtn" class="icon-btn" type="button" aria-label="Close">âœ•</button>
        </div>

        <form autocomplete="off" th:action="@{/jobs}" th:object="${job}" method="post" class="modal-body">
            <label>
                Company
                <input type="text" th:field="*{company}" required>
            </label>

            <label>
                Position
                <input type="text" th:field="*{position}" required>
            </label>

            <label>
                Status
                <select th:field="*{status}" required>
                    <option value="APPLIED">APPLIED</option>
                    <option value="INTERVIEW">INTERVIEW</option>
                    <option value="OFFER">OFFER</option>
                    <option value="REJECTED">REJECTED</option>
                </select>
            </label>

            <label>
                Applied Date
                <input type="date" th:field="*{appliedDate}">
            </label>

            <label>
                Notes
                <textarea th:field="*{notes}" rows="4"></textarea>
            </label>

            <div class="modal-footer">
                <button id="cancelBtn" type="button">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<script th:src="@{/app.js}"></script></body>
</html>
